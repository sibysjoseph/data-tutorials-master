{"topologyName":"Trucking-IoT-Demo-V2","config":"{\"topology.workers\":1,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{}]}","sources":[{"id":2,"topologyId":1,"topologyComponentBundleId":1,"versionId":1,"name":"TruckData","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"trucking_data_truck1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"sandbox-hdf.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"Sandbox","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"trucking_data_truck","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":2,"versionId":1,"streamId":"kafka_stream_2","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false}],"timestamp":1517848129547}],"timestamp":1517844402437},{"id":1,"topologyId":1,"topologyComponentBundleId":1,"versionId":1,"name":"TrafficData","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"trucking_data_traffic1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"sandbox-hdf.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"Sandbox","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"trucking_data_traffic","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":1,"versionId":1,"streamId":"kafka_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1517848129547}],"timestamp":1517844368834}],"sinks":[{"id":9,"topologyId":1,"topologyComponentBundleId":10,"versionId":1,"name":"ToDataLake2","description":"","config":{"properties":{"fsUrl":"hdfs://sandbox-hdp.hortonworks.com:8020","outputFields":["driverId","routeId","speed","foggy","rainy","speed_AVG","windy"],"path":"/apps/trucking/average-speed","extension":".txt","rotationPolicy":{"sizeBasedRotation":{"rotationSize":500,"rotationSizeUnit":"KB"}},"prefix":"","parallelism":1,"countPolicyValue":1000}},"reconfigure":false,"timestamp":1517848129547},{"id":8,"topologyId":1,"topologyComponentBundleId":16,"versionId":1,"name":"ToDruidStore2","description":"","config":{"properties":{"clusterReplication":1,"segmentGranularity":"MINUTE","indexRetryPeriod":"PT3M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT3M","aggregatorList":[],"tranquilityZKconnect":"sandbox-hdp.hortonworks:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"average-speed-cube-01","dimensions":["driverId","routeId","speed","foggy","rainy","windy","speed_AVG"]}},"reconfigure":false,"timestamp":1517848129547},{"id":5,"topologyId":1,"topologyComponentBundleId":16,"versionId":1,"name":"ToDruidStore1","description":"","config":{"properties":{"clusterReplication":1,"segmentGranularity":"MINUTE","indexRetryPeriod":"PT3M","maxBatchSize":50,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT3M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"sandbox-hdp.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":100,"queryGranularity":"MINUTE","dataSource":"violation-events-cube-01","dimensions":["eventTime","routeId","congestionLevel","truckId","driverId","driverName","routeName","latitude","longitude","speed","eventType","foggy","rainy","windy"]}},"reconfigure":false,"timestamp":1517848129547},{"id":6,"topologyId":1,"topologyComponentBundleId":10,"versionId":1,"name":"ToDataLake1","description":"","config":{"properties":{"fsUrl":"hdfs://sandbox-hdp.hortonworks.com:8020","outputFields":["eventTime","routeId","congestionLevel","truckId","speed","eventType","windy","rainy","foggy","longitude","latitude","routeName","driverId","driverName"],"path":"/apps/trucking/violation-events","extension":".txt","rotationPolicy":{"sizeBasedRotation":{"rotationSize":500,"rotationSizeUnit":"KB"}},"prefix":"","parallelism":1,"countPolicyValue":1000}},"reconfigure":false,"timestamp":1517848129547}],"processors":[{"id":3,"topologyId":1,"topologyComponentBundleId":7,"versionId":1,"name":"JoinStreams","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_1","key":"routeId","with":"kafka_stream_2"}],"parallelism":1,"from":{"stream":"kafka_stream_2","key":"routeId"},"outputKeys":["kafka_stream_2:eventTime as eventTime","truckId as truckId","driverId as driverId","driverName as driverName","kafka_stream_2:routeId as routeId","routeName as routeName","latitude as latitude","longitude as longitude","speed as speed","eventType as eventType","foggy as foggy","rainy as rainy","windy as windy","congestionLevel as congestionLevel"],"window":{"windowLength":{"class":".Window$Duration","durationMs":1000},"slidingInterval":{"class":".Window$Duration","durationMs":1000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_3"}},"reconfigure":false,"outputStreams":[{"id":3,"versionId":1,"streamId":"join_processor_stream_3","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1517848129547}],"timestamp":1517848129547},{"id":4,"topologyId":1,"topologyComponentBundleId":4,"versionId":1,"name":"FilterEvents","description":"","config":{"properties":{"rules":[1]}},"reconfigure":false,"outputStreams":[{"id":4,"versionId":1,"streamId":"rule_transform_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1517848129547},{"id":5,"versionId":1,"streamId":"rule_notifier_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1517848129547}],"timestamp":1517848129547},{"id":10,"topologyId":1,"topologyComponentBundleId":5,"versionId":1,"name":"AverageSpeed","description":"","config":{"properties":{"rules":[3],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":8,"versionId":1,"streamId":"window_transform_stream_10","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1517848129547},{"id":9,"versionId":1,"streamId":"window_notifier_stream_10","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1517848129547}],"timestamp":1517848129547}],"edges":[{"id":3,"versionId":1,"topologyId":1,"fromId":2,"toId":3,"streamGroupings":[{"streamId":2,"grouping":"FIELDS","fields":["routeId"]}],"timestamp":1517848129547},{"id":2,"versionId":1,"topologyId":1,"fromId":1,"toId":3,"streamGroupings":[{"streamId":1,"grouping":"FIELDS","fields":["routeId"]}],"timestamp":1517848129547},{"id":4,"versionId":1,"topologyId":1,"fromId":3,"toId":4,"streamGroupings":[{"streamId":3,"grouping":"SHUFFLE","fields":null}],"timestamp":1517848129547},{"id":5,"versionId":1,"topologyId":1,"fromId":4,"toId":6,"streamGroupings":[{"streamId":4,"grouping":"SHUFFLE","fields":null}],"timestamp":1517848129547},{"id":6,"versionId":1,"topologyId":1,"fromId":4,"toId":5,"streamGroupings":[{"streamId":4,"grouping":"SHUFFLE","fields":null}],"timestamp":1517848129547},{"id":11,"versionId":1,"topologyId":1,"fromId":4,"toId":10,"streamGroupings":[{"streamId":4,"grouping":"FIELDS","fields":["driverId","routeId","speed","foggy","rainy","windy"]}],"timestamp":1517848129547},{"id":12,"versionId":1,"topologyId":1,"fromId":10,"toId":8,"streamGroupings":[{"streamId":8,"grouping":"SHUFFLE","fields":null}],"timestamp":1517848129547},{"id":13,"versionId":1,"topologyId":1,"fromId":10,"toId":9,"streamGroupings":[{"streamId":8,"grouping":"SHUFFLE","fields":null}],"timestamp":1517848129547}],"rules":[{"reconfigure":false,"id":1,"versionId":1,"topologyId":1,"name":"IsViolation","description":"IsViolation","streams":["join_processor_stream_3"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_3 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_1"],"transforms":[]}],"outputStreams":["rule_transform_stream_1","rule_notifier_stream_1"],"timestamp":1517848129547}],"windows":[{"reconfigure":false,"id":3,"versionId":1,"topologyId":1,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_1"],"window":{"windowLength":{"class":".Window$Duration","durationMs":10000},"slidingInterval":{"class":".Window$Duration","durationMs":10000},"tsField":"eventTime","tsFields":[],"lagMs":1000,"lateStream":null},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_10"],"transforms":[]}],"projections":[{"functionName":"AVG_FN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"routeId"},{"expr":"speed"},{"expr":"foggy"},{"expr":"rainy"},{"expr":"windy"}],"groupbykeys":["driverId","routeId","speed","foggy","rainy","windy"],"outputStreams":["window_transform_stream_10","window_notifier_stream_10"],"timestamp":1517848129547}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","5":"WINDOW","16":"DRUID","7":"JOIN","10":"HDFS"},"topologyEditorMetadata":{"topologyId":1,"versionId":1,"data":"{\"sources\":[{\"x\":-32.000003814697266,\"y\":265.5,\"id\":1},{\"x\":-37.000003814697266,\"y\":385.5,\"id\":2}],\"processors\":[{\"x\":228,\"y\":320.5,\"id\":3},{\"x\":528,\"y\":370.5,\"id\":4},{\"x\":636.25,\"y\":57,\"id\":10}],\"sinks\":[{\"x\":870.5,\"y\":440.5,\"id\":5},{\"x\":863,\"y\":318,\"id\":6},{\"x\":893,\"y\":10.499998092651367,\"id\":8},{\"x\":893,\"y\":135.5,\"id\":9}],\"graphTransforms\":{\"dragCoords\":[76,116],\"zoomScale\":0.8}}","timestamp":1517848127458}}