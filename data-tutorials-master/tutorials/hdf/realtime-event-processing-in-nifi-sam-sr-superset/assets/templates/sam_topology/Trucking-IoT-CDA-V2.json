{"topologyName":"Trucking-IoT-CDA-V2","config":"{\"topology.workers\":1,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"\"}","sources":[{"id":38,"topologyId":6,"topologyComponentBundleId":1,"versionId":19,"name":"TrafficData","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"trucking_data_traffic1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"sandbox-hdf.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"Sandbox","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"trucking_data_traffic","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":37,"versionId":19,"streamId":"kafka_stream_1","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1528844286631}]},{"id":37,"topologyId":6,"topologyComponentBundleId":1,"versionId":19,"name":"TruckEnrichedData","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"trucking_data_truck_enriched1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"sandbox-hdf.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"Sandbox","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"trucking_data_truck_enriched","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":36,"versionId":19,"streamId":"kafka_stream_2","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"foggy","type":"INTEGER","optional":false},{"name":"rainy","type":"INTEGER","optional":false},{"name":"windy","type":"INTEGER","optional":false}],"timestamp":1528844286631}]}],"sinks":[{"id":42,"topologyId":6,"topologyComponentBundleId":16,"versionId":19,"name":"ToDruidStore1","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"SECOND","indexRetryPeriod":"PT1M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT1M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"sandbox-hdp.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"SECOND","dataSource":"violation-events-cube-01","clusters":"Sandbox","dimensions":["eventTime","routeId","congestionLevel","truckId","driverId","driverName","routeName","latitude","longitude","speed","eventType"]}},"reconfigure":false,"timestamp":1528844286631},{"id":43,"topologyId":6,"topologyComponentBundleId":10,"versionId":19,"name":"ToDataLake1","description":"","config":{"properties":{"fsUrl":"hdfs://sandbox-hdp.hortonworks.com:8020","outputFields":["eventTime","routeId","congestionLevel","truckId","speed","eventType","longitude","latitude","routeName","driverId","driverName"],"path":"/apps/trucking/violation-events","cluster":"2","extension":".txt","rotationPolicy":{"sizeBasedRotation":{"rotationSize":500,"rotationSizeUnit":"KB"}},"prefix":"","parallelism":1,"countPolicyValue":1000,"clusters":"Sandbox"}},"reconfigure":false,"timestamp":1528844286631},{"id":44,"topologyId":6,"topologyComponentBundleId":16,"versionId":19,"name":"ToDruidStore2","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"SECOND","indexRetryPeriod":"PT1M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT1M","aggregatorList":[],"tranquilityZKconnect":"sandbox-hdp.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","topic":"","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"SECOND","dataSource":"average-speed-cube-01","clusters":"Sandbox","dimensions":["driverId","routeId","speed","speed_AVG"]}},"reconfigure":false,"timestamp":1528844286631},{"id":45,"topologyId":6,"topologyComponentBundleId":10,"versionId":19,"name":"ToDataLake2","description":"","config":{"properties":{"fsUrl":"hdfs://sandbox-hdp.hortonworks.com:8020","outputFields":["driverId","routeId","speed","speed_AVG"],"path":"/apps/trucking/average-speed","cluster":"2","extension":".txt","rotationPolicy":{"sizeBasedRotation":{"rotationSize":500,"rotationSizeUnit":"KB"}},"prefix":"","parallelism":1,"topic":"","countPolicyValue":1000,"clusters":"Sandbox"}},"reconfigure":false,"timestamp":1528844286631}],"processors":[{"id":46,"topologyId":6,"topologyComponentBundleId":7,"versionId":19,"name":"JoinStreams","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_1","key":"routeId","with":"kafka_stream_2"}],"parallelism":1,"from":{"stream":"kafka_stream_2","key":"routeId"},"outputKeys":["kafka_stream_1:eventTime as eventTime","truckId as truckId","driverId as driverId","driverName as driverName","kafka_stream_2:routeId as routeId","routeName as routeName","latitude as latitude","longitude as longitude","speed as speed","eventType as eventType","congestionLevel as congestionLevel"],"window":{"windowLength":{"class":".Window$Duration","durationMs":1000},"slidingInterval":{"class":".Window$Duration","durationMs":1000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_46"}},"reconfigure":false,"outputStreams":[{"id":43,"versionId":19,"streamId":"join_processor_stream_46","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1528844286631}],"timestamp":1528844286631},{"id":40,"topologyId":6,"topologyComponentBundleId":4,"versionId":19,"name":"FilterEvents","description":"","config":{"properties":{"rules":[6]}},"reconfigure":false,"outputStreams":[{"id":39,"versionId":19,"streamId":"rule_transform_stream_3","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1528844286631},{"id":40,"versionId":19,"streamId":"rule_notifier_stream_3","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"LONG","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"routeName","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"congestionLevel","type":"INTEGER","optional":false}],"timestamp":1528844286631}],"timestamp":1528844286631},{"id":41,"topologyId":6,"topologyComponentBundleId":5,"versionId":19,"name":"AverageSpeed","description":"","config":{"properties":{"rules":[6],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":41,"versionId":19,"streamId":"window_transform_stream_5","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1528844286631},{"id":42,"versionId":19,"streamId":"window_notifier_stream_5","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1528844286631}],"timestamp":1528844286631}],"edges":[{"id":47,"versionId":19,"topologyId":6,"fromId":38,"toId":46,"streamGroupings":[{"streamId":37,"grouping":"FIELDS","fields":["routeId"]}],"timestamp":1528844286631},{"id":48,"versionId":19,"topologyId":6,"fromId":37,"toId":46,"streamGroupings":[{"streamId":36,"grouping":"FIELDS","fields":["routeId"]}],"timestamp":1528844286631},{"id":49,"versionId":19,"topologyId":6,"fromId":46,"toId":40,"streamGroupings":[{"streamId":43,"grouping":"SHUFFLE","fields":null}],"timestamp":1528844286631},{"id":42,"versionId":19,"topologyId":6,"fromId":40,"toId":41,"streamGroupings":[{"streamId":39,"grouping":"FIELDS","fields":["driverId","routeId","speed"]}],"timestamp":1528844286631},{"id":43,"versionId":19,"topologyId":6,"fromId":40,"toId":43,"streamGroupings":[{"streamId":39,"grouping":"SHUFFLE","fields":null}],"timestamp":1528844286631},{"id":44,"versionId":19,"topologyId":6,"fromId":40,"toId":42,"streamGroupings":[{"streamId":39,"grouping":"SHUFFLE","fields":null}],"timestamp":1528844286631},{"id":45,"versionId":19,"topologyId":6,"fromId":41,"toId":45,"streamGroupings":[{"streamId":41,"grouping":"SHUFFLE","fields":null}],"timestamp":1528844286631},{"id":46,"versionId":19,"topologyId":6,"fromId":41,"toId":44,"streamGroupings":[{"streamId":41,"grouping":"SHUFFLE","fields":null}],"timestamp":1528844286631}],"rules":[{"reconfigure":false,"id":6,"versionId":19,"topologyId":6,"name":"IsViolation","description":"IsViolation","streams":["join_processor_stream_46"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_46 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_3"],"transforms":[]}],"outputStreams":["rule_transform_stream_3","rule_notifier_stream_3"],"timestamp":1528844286631}],"windows":[{"reconfigure":false,"id":6,"versionId":19,"topologyId":6,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_3"],"window":{"windowLength":{"class":".Window$Duration","durationMs":8000},"slidingInterval":{"class":".Window$Duration","durationMs":8000},"tsField":"eventTime","tsFields":[],"lagMs":1000,"lateStream":null},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_5"],"transforms":[]}],"projections":[{"functionName":"AVG_FN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"routeId"},{"expr":"speed"}],"groupbykeys":["driverId","routeId","speed"],"outputStreams":["window_transform_stream_41","window_notifier_stream_41"],"timestamp":1528844286631}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","16":"DRUID","5":"WINDOW","7":"JOIN","10":"HDFS"},"topologyEditorMetadata":{"topologyId":6,"versionId":19,"data":"{\"sources\":[{\"x\":-259.22027587890625,\"y\":-33.147796630859375,\"id\":38},{\"x\":-258.0874938964844,\"y\":61.797149658203125,\"id\":37}],\"sinks\":[{\"x\":664.6292724609375,\"y\":23.13583755493164,\"id\":43},{\"x\":708.2979125976562,\"y\":113.48640441894531,\"id\":42},{\"x\":723.909912109375,\"y\":-103.15779876708984,\"id\":45},{\"x\":673.6502075195312,\"y\":-195.94496154785156,\"id\":44}],\"processors\":[{\"x\":321.8322448730469,\"y\":7.6713104248046875,\"id\":40},{\"x\":415.76708984375,\"y\":-140.4552764892578,\"id\":41},{\"x\":47.3369140625,\"y\":5.093889236450195,\"id\":46}],\"graphTransforms\":{\"dragCoords\":[381.8788006754178,377.915879746825],\"zoomScale\":0.7759695282733879},\"customNames\":null}","timestamp":1528844286631}}